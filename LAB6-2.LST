LAB6-2                                                                                                        PAGE 1

                       1    $MOD52
                       2    
                       3    ;–î–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–≤–æ–¥ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–π –∏–Ω
                                                                               —Ñ–æ—Ä–º–∞—Ü–∏–∏
                       4    ;–ø–æ –æ–¥–Ω–æ–º—É –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ (16 –æ—Ç—Å—á—ë—Ç–æ–≤) –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–µ—Ä—ã–≤–∞–
                                                                               Ω–∏—è –ê–¶–ü.
                       5    ;–ó–∞–ø—É—Å–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ç–∞–π–º
                                                                               –µ—Ä–∞.
                       6    ;–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É, –ø—Ä–µ–¥—Å—Ç–∞–≤
                                                                               –ª–µ–Ω–Ω–æ–º—É –≤ –ª–∞–±. 1.
                       7    
  00EF                 8    ADCCON1 EQU 0EFh
  00D8                 9    ADCCON2 EQU 0D8h
  00F5                10    ADCCON3 EQU 0F5h
                      11    
  00D9                12    ADCDATAL EQU 0D9h
  00DA                13    ADCDATAH EQU 0DAh 
                      14    
                      15    ;–ê–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  0030                16    DATAL EQU 30h
  0031                17    DATAH EQU 31h
  0032                18    COUNTER EQU 32h
                      19    
0000                  20    ORG 00h
0000                  21    start:
                      22            ;–°—Ç–µ–∫ —Ä–∞—Å—Ç—ë—Ç –≤–≤–µ—Ä—Ö - —É–∫–∞–∑–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—
                                                                               Ä–≤—ã–π –±–∞–π—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–≥—Ä–∞–
                                                                               º–º—ã
0000 758169           23            mov SP, #stack
                      24            
0003 7830             25            mov R0, #DATAL
0005 7600             26            mov @R0, #00h
                      27            
0007 7831             28            mov R0, #DATAH
0009 7600             29            mov @R0, #00h
                      30            
000B 7832             31            mov R0, #COUNTER
000D 7600             32            mov @R0, #00h
                      33            
                      34            ;–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ê–¶–ü
                      35            ;–†–∞–±–æ—Ç–∞ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ
                      36            ;–ó–∞–ø—É—Å–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ—Ç T/C2
000F 75EF42           37            mov ADCCON1, #42h
                      38            
                      39            ;–°–ª—É—à–∞–µ–º —Ç–æ–ª—å–∫–æ 0-–π –∫–∞–Ω–∞–ª
0012 75D800           40            mov ADCCON2, #00h
                      41            
                      42            ;–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
0015 75A8C0           43            mov IE, #0C0h
                      44    
                      45            ;–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
0018 75CA00           46            mov RCAP2L, #00h
001B 75CB00           47            mov RCAP2H, #00h
                      48            
                      49            ;–ó–∞–ø—É—Å–∫ T/C2
001E 75C804           50            mov T2CON, #04h
                      51    
                      52    ;–ö–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã
LAB6-2                                                                                                        PAGE 2

0021                  53    lp:
0021 80FE             54            jmp lp
                      55            
                      56    ;–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ê–¶–ü
0033                  57    ORG 33h
                      58            ;–°–∫–ª–∞–¥—ã–≤–∞–µ–º –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã
0033 C3               59            clr C
0034 7830             60            mov R0, #DATAL
0036 E5D9             61            mov A, ADCDATAL
0038 26               62            add A, @R0
0039 F6               63            mov @R0, A
                      64            
                      65            ;–°–∫–ª–∞–¥—ã–≤–∞–µ–º —Å—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã —Å —É—á—ë—Ç–æ–º –ø–µ—Ä–µ–Ω–æ—Å–∞
003A 7831             66            mov R0, #DATAH
003C E5DA             67            mov A, ADCDATAH
003E 36               68            addc A, @R0
003F F6               69            mov @R0, A
                      70            
                      71            ;–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ–º —á–∏—Å–ª–æ –æ—Ç—Å—á—ë—Ç–æ–≤
0040 7832             72            mov R0, #COUNTER
0042 06               73            inc @R0
                      74            
0043 E6               75            mov A, @R0
0044 9410             76            subb A, #10h
0046 7020             77            jnz end_of_handler
                      78            
                      79            ;–û—Ç–∫–ª—é—á–∞–µ–º T/C2
0048 75C800           80            mov T2CON, #00h
                      81            
                      82            ;–ù–∞—Ö–æ–¥–∏–º —Å—Ä. –∞—Ä–∏—Ñ–º. –æ—Ç—Å—á—ë—Ç–æ–≤
004B 7830             83            mov R0, #DATAL; –û—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º –º–ª–∞–¥—à–∏–µ 4 –±–∏—Ç–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–
                                                                               π —Å—É–º–º—ã == –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 16
004D E6               84            mov A, @R0
004E 54F0             85            anl A, #0F0h
0050 03               86            rr A
0051 03               87            rr A
0052 03               88            rr A
0053 03               89            rr A
0054 F6               90            mov @R0, A
                      91            
                      92            ;–ü–µ—Ä–µ–Ω–æ—Å–∏–º –º–ª–∞–¥—à–∏–µ 4 –±–∏—Ç–∞ –∏–∑ —Å—Ç–∞—Ä—à–µ–≥–æ –±–∞–π—Ç–∞ –≤ –º
                                                                               –ª–∞–¥—à–∏–π
0055 7931             93            mov R1, #DATAH
0057 E7               94            mov A, @R1
0058 540F             95            anl A, #0Fh
005A 23               96            rl A
005B 23               97            rl A
005C 23               98            rl A
005D 23               99            rl A
005E 46              100            orl A, @R0
005F F6              101            mov @R0, A
                     102            
                     103            ;–ü–µ—Ä–µ–Ω–æ—Å–∏–º —Å—Ç–∞—Ä—à–∏–µ 4 –±–∏—Ç–∞ —Å—Ç–∞—Ä—à–µ–≥–æ –±–∞–π—Ç–∞ –≤ –º–ª–∞–
                                                                               ¥—à—É—é –µ–≥–æ –ø–æ–ª–æ–≤–∏–Ω—É
0060 E7              104            mov A, @R1
0061 54F0            105            anl A, #0F0h
0063 03              106            rr A
0064 03              107            rr A
LAB6-2                                                                                                        PAGE 3

0065 03              108            rr A
0066 03              109            rr A
0067 F7              110            mov @R1, A
                     111            
0068                 112    end_of_handler:
0068 32              113            reti
                     114            
0069                 115    stack:
                     116    
                     117    END

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
LAB6-2                                                                                                        PAGE 4

ADCCON1. . . . . . . . . . . . .    NUMB  00EFH  
ADCCON2. . . . . . . . . . . . .    NUMB  00D8H  
ADCCON3. . . . . . . . . . . . .    NUMB  00F5H  NOT USED  
ADCDATAH . . . . . . . . . . . .    NUMB  00DAH  
ADCDATAL . . . . . . . . . . . .    NUMB  00D9H  
COUNTER. . . . . . . . . . . . .    NUMB  0032H  
DATAH. . . . . . . . . . . . . .    NUMB  0031H  
DATAL. . . . . . . . . . . . . .    NUMB  0030H  
END_OF_HANDLER . . . . . . . . .  C ADDR  0068H  
IE . . . . . . . . . . . . . . .  D ADDR  00A8H  PREDEFINED  
LP . . . . . . . . . . . . . . .  C ADDR  0021H  
RCAP2H . . . . . . . . . . . . .  D ADDR  00CBH  PREDEFINED  
RCAP2L . . . . . . . . . . . . .  D ADDR  00CAH  PREDEFINED  
SP . . . . . . . . . . . . . . .  D ADDR  0081H  PREDEFINED  
STACK. . . . . . . . . . . . . .  C ADDR  0069H  
START. . . . . . . . . . . . . .  C ADDR  0000H  NOT USED  
T2CON. . . . . . . . . . . . . .  D ADDR  00C8H  PREDEFINED  
